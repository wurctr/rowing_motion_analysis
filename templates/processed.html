<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Analysis Result</title>
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-9ndCyUa1j47c4KY3qzYiu7LDlUi2sCALbZ1B/TYhhcF0ScNFK0jQJk4tdfqa7lNf" 
    crossorigin="anonymous">
</head>
<body class="bg-light">
  <div class="container py-5">
    <header class="mb-4">
      <h1 class="display-5 text-center">Analysis Complete</h1>
      <p class="text-center text-muted">Below are the analysis results and your annotated video.</p>
    </header>

    <div class="card mx-auto mb-4" style="max-width: 720px;">
      <div class="card-body">
        <h2 class="h5 mb-3">Analysis Results</h2>
        <ul class="list-group">
          <li class="list-group-item">Timestamp: {{ analysis.timestamp }}</li>
          <li class="list-group-item">Player: {{ analysis.player }}</li>
          <li class="list-group-item">Stroke Cycle Time: {{ analysis.stroke_cycle_time }} sec</li>
          <li class="list-group-item">Average Pelvis Angle: {{ analysis.pelvis_angle }} deg</li>
          <li class="list-group-item">Average Knee Angle: {{ analysis.knee_angle }} deg</li>
          <li class="list-group-item">Average Ankle Angle: {{ analysis.ankle_angle }} deg</li>
        </ul>
      </div>
    </div>

    <div class="card mx-auto" style="max-width: 720px;">
      <div class="card-body text-center">
        <h2 class="card-title h5 mb-3">Annotated Video</h2>
        <video width="640" height="480" controls class="border">
          <source src="{{ video_url }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <p class="mt-3">
          <a href="{{ video_url }}" class="btn btn-success" download>Download Processed Video</a>
        </p>
        <p class="text-muted"><small>If the video doesn't play, try downloading it directly.</small></p>
      </div>
    </div>

    <div class="text-center mt-4">
      <a href="{{ url_for('download_results') }}" class="btn btn-secondary">Download All Analysis Results (CSV)</a>
    </div>

    <footer class="text-center mt-5 text-muted">
      <p class="mb-0">Â© 2024 Your Organization Name</p>
      <p class="mb-0"><a href="{{ url_for('index') }}">Analyze another video</a></p>
    </footer>
  </div>
  
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+P5CJ7lR5TvZNTv617RZbG1t8M7gD" 
    crossorigin="anonymous">
  </script>
</body>
</html>
